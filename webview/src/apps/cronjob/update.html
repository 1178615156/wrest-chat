<layout-header></layout-header>

<nav class="container-lg mb-3">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a routerLink="/welcome">首页</a></li>
        <li class="breadcrumb-item"><a routerLink="/cronjob/list">计划任务</a></li>
        <li class="breadcrumb-item active">添加</li>
    </ol>
</nav>

<div class="container-lg mb-3">
    <form class="row gy-3" (ngSubmit)="updateCronjob()" #myform="ngForm">
        <div class="col-12">
            <label class="form-label">名称 *</label>
            <input type="text" name="name" class="form-control" [(ngModel)]="formdata.name" required />
            <div class="form-text">
                计划任务名称
            </div>
        </div>
        <div class="col-12">
            <label class="form-label">计划 *</label>
            <div class="row g-3">
                <div class="col-2">
                    <input type="text" name="second" class="form-control" [(ngModel)]="formdata.second" required />
                </div>
                <div class="col-2">
                    <input type="text" name="minute" class="form-control" [(ngModel)]="formdata.minute" required />
                </div>
                <div class="col-2">
                    <input type="text" name="hour" class="form-control" [(ngModel)]="formdata.hour" required />
                </div>
                <div class="col-2">
                    <input type="text" name="day_of_month" class="form-control" [(ngModel)]="formdata.day_of_month" required />
                </div>
                <div class="col-2">
                    <input type="text" name="month" class="form-control" [(ngModel)]="formdata.month" required />
                </div>
                <div class="col-2">
                    <input type="text" name="day_of_week" class="form-control" [(ngModel)]="formdata.day_of_week" required />
                </div>
            </div>
            <div class="form-text">
                执行时间排程：秒 分 时 日 月 周
            </div>
        </div>
        <div class="col-12">
            <label class="form-label">类型 *</label>
            <select name="type" class="form-select" [(ngModel)]="formdata.type">
                <option value="BAT">BAT</option>
                <option value="POWERSHELL">POWERSHELL</option>
            </select>
            <div class="form-text">
                Windows 仅支持 BAT 和 POWERSHELL
            </div>
        </div>
        <div class="col-12">
            <label class="form-label">超时 *</label>
            <input type="text" name="timeout" class="form-control" [(ngModel)]="formdata.timeout" required />
            <div class="form-text">
                脚本执行超时时间，单位：秒
            </div>
        </div>
        <div class="col-12">
            <label class="form-label">执行路径 *</label>
            <input type="text" name="directory" class="form-control" [(ngModel)]="formdata.directory" required />
            <div class="form-text">
                脚本执行路径
            </div>
        </div>
        <div class="col-12">
            <label class="form-label">命令内容 *</label>
            <textarea name="content" class="form-control" rows="5" [(ngModel)]="formdata.content" required></textarea>
            <div class="form-text">
                返回值可用于发送消息，格式："wxid<b>\n</b>message" 或 "wxid<b>\n</b>roomid<b>\n</b>message"，支持网络文件或图片
            </div>
        </div>
        <div class="col-12">
            <button type="submit" class="btn btn-primary" [disabled]="myform.invalid">确认</button>
        </div>
    </form>
</div>